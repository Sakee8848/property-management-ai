# 🚀 快速使用指南 - 自动部署脚本

## 一行命令，完成所有部署！

```bash
./deploy.sh "你的变更说明"
```

---

## 📦 这个脚本会自动帮你做什么？

1. ✅ **检测代码变更** - 自动找到所有修改的文件
2. ✅ **提交到Git** - 自动add和commit
3. ✅ **推送到GitHub** - 自动push到远程仓库
4. ✅ **生成版本号** - 自动递增版本号（如v1.0.7）
5. ✅ **记录变更历史** - 生成RELEASE.md
6. ✅ **生成部署摘要** - 生成DEPLOYMENT_SUMMARY.txt
7. ✅ **统计代码变化** - 显示新增/删除的代码行数
8. ✅ **提供访问链接** - 直接显示可访问的URL

---

## 🎯 使用示例

### 示例1：修复bug
```bash
./deploy.sh "修复登录页面按钮样式问题"
```

### 示例2：新增功能
```bash
./deploy.sh "新增用户头像上传功能"
```

### 示例3：优化性能
```bash
./deploy.sh "优化移动端触摸响应速度"
```

### 示例4：更新文档
```bash
./deploy.sh "更新API文档和使用说明"
```

---

## 📊 脚本运行后你会看到：

```
╔══════════════════════════════════════════════════════════════════╗
║              物业管理AI系统 - 自动部署工具                       ║
╚══════════════════════════════════════════════════════════════════╝

✅ Git仓库检查通过
✅ 文件已添加
✅ Release文档已更新：RELEASE.md
✅ 部署摘要已生成：DEPLOYMENT_SUMMARY.txt
✅ 代码已提交
✅ main分支推送成功

╔══════════════════════════════════════════════════════════════════╗
║                    🎉 部署成功！                                  ║
╚══════════════════════════════════════════════════════════════════╝

✅ 版本：v1.0.7
✅ 变更：你的变更说明
✅ 时间：2026-01-17 16:10:59

访问地址：
  📱 https://sakee8848.github.io/property-management-ai/mvp-prototype.html
```

---

## 📂 自动生成的文档

### RELEASE.md - 版本发布记录
记录所有版本的完整历史：
- 版本号和时间
- 变更说明
- 代码统计
- 修改的文件列表

### DEPLOYMENT_SUMMARY.txt - 本次部署摘要
包含：
- 本次部署信息
- 访问链接
- **可直接复制发给客户的文案**

---

## 💡 超级实用技巧

### 1. 创建快捷命令（推荐！）

将以下内容添加到 `~/.zshrc` 文件：

```bash
# 快速部署（从任何位置）
alias deploy='cd /Users/tonyyu/Documents/物业管理 && ./deploy.sh'

# 查看部署摘要
alias summary='cat /Users/tonyyu/Documents/物业管理/DEPLOYMENT_SUMMARY.txt'

# 复制摘要到剪贴板（Mac）
alias summary-copy='cat /Users/tonyyu/Documents/物业管理/DEPLOYMENT_SUMMARY.txt | pbcopy && echo "✅ 已复制到剪贴板"'
```

然后运行：
```bash
source ~/.zshrc
```

现在你可以在任何位置使用：
```bash
deploy "修复bug"
summary-copy  # 复制后直接发给客户
```

### 2. 快速分享给客户

部署完成后：
```bash
# Mac系统
cat DEPLOYMENT_SUMMARY.txt | pbcopy

# 然后粘贴发给客户（文案已经写好）
```

### 3. 查看历史版本

```bash
# 查看所有版本
cat RELEASE.md

# 查看最近5个版本
head -n 100 RELEASE.md

# 搜索特定功能
grep "登录" RELEASE.md
```

---

## ⚡ 典型工作流程

### 日常开发流程：

```bash
# 1. 修改代码
vim frontend/src/views/Login.vue

# 2. 测试功能
npm run dev

# 3. 一键部署
./deploy.sh "优化登录页面UI"

# 4. 等待30秒，访问URL查看效果
# https://sakee8848.github.io/property-management-ai/mvp-prototype.html

# 5. 分享给客户
cat DEPLOYMENT_SUMMARY.txt | pbcopy
# 粘贴到微信/邮件
```

---

## 🎨 完整的使用示例

```bash
# 场景：客户反馈登录按钮颜色不明显

# 1. 修改代码
vim frontend/src/views/Login.vue
# 将按钮颜色从蓝色改为绿色

# 2. 本地测试
cd frontend && npm run dev
# 在浏览器查看效果

# 3. 满意后，部署
cd ..
./deploy.sh "优化登录按钮颜色，提升视觉效果"

# 输出：
# ✅ 版本：v1.0.8
# ✅ 变更：优化登录按钮颜色，提升视觉效果
# ✅ 部署成功！

# 4. 通知客户
cat DEPLOYMENT_SUMMARY.txt
# 复制里面的"分享给客户"部分，发送给客户

# 客户收到：
# 您好！物业管理AI系统已更新 🎉
# 🆕 本次更新：优化登录按钮颜色，提升视觉效果
# 🔗 访问地址：https://...
```

---

## 📋 命令速查表

| 命令 | 说明 |
|------|------|
| `./deploy.sh "说明"` | 部署并推送 |
| `cat RELEASE.md` | 查看版本历史 |
| `cat DEPLOYMENT_SUMMARY.txt` | 查看本次摘要 |
| `git log --oneline -5` | 查看最近提交 |
| `git status` | 查看当前状态 |

---

## ❓ 常见问题

### Q: 脚本提示"没有检测到任何更改"？
**A**: 说明你的代码已经是最新的，没有需要提交的内容。

### Q: 推送失败怎么办？
**A**: 检查网络连接，或者运行 `git pull` 先拉取最新代码。

### Q: 版本号如何计算？
**A**: 
- 格式：v主版本.次版本.修订号
- 每提交一次，修订号+1
- 每10次提交，次版本+1

### Q: 可以修改提交信息吗？
**A**: 可以！编辑 `deploy.sh` 文件，找到 `full_commit_msg` 那一行。

### Q: 如何撤销部署？
**A**: 
```bash
git reset --soft HEAD~1  # 撤销提交但保留更改
git reset --hard HEAD~1  # 撤销提交并丢弃更改（危险！）
```

---

## 🎯 最佳实践

### ✅ 推荐做法

1. **清晰的变更说明**
   ```bash
   ./deploy.sh "修复：登录页面在iPhone上显示错位"
   ./deploy.sh "新增：支持微信支付集成"
   ./deploy.sh "优化：减少首页加载时间50%"
   ```

2. **完成一个功能就部署一次**
   - 不要累积太多更改
   - 便于追踪问题
   - 方便回滚

3. **定期部署**
   - 每天工作结束前部署
   - 重要更新立即部署

### ❌ 不推荐做法

1. **模糊的说明**
   ```bash
   ./deploy.sh "修改"
   ./deploy.sh "update"
   ./deploy.sh "..."
   ```

2. **累积大量更改**
   - 一次提交几十个文件
   - 难以追踪具体改动

---

## 🚀 立即开始

现在就试试吧！

```bash
# 1. 进入项目目录
cd /Users/tonyyu/Documents/物业管理

# 2. 运行部署脚本
./deploy.sh "测试自动部署功能"

# 3. 查看结果
cat DEPLOYMENT_SUMMARY.txt

# 4. 完成！
```

---

## 📚 更多文档

- 详细说明：`部署脚本使用说明.md`
- 快捷命令：`.zshrc_alias`
- 版本历史：`RELEASE.md`

---

**享受自动化部署的便捷吧！** 🎊

**有任何问题？查看 `部署脚本使用说明.md` 获取完整文档。**
