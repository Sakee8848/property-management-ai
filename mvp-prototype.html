<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹ - MVPåŸå‹</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@4/lib/index.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background-color: #f7f8fa;
        }

        #app {
            min-height: 100vh;
            padding-bottom: 50px;
        }

        /* ç™»å½•é¡µæ ·å¼ */
        .login-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 20px;
        }

        .login-header {
            text-align: center;
            color: white;
            margin-bottom: 60px;
        }

        .login-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .login-header p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* é¦–é¡µæ ·å¼ */
        .header-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-assistant {
            background: white;
            margin: 16px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 16px;
        }

        .function-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .function-item:active {
            transform: scale(0.95);
        }

        .function-item .icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        /* èŠå¤©é¡µé¢æ ·å¼ */
        .chat-page {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f0f2f5;
        }

        .message-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .welcome {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome .icon {
            font-size: 60px;
            color: #667eea;
            margin-bottom: 16px;
        }

        .quick-questions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 300px;
            margin: 20px auto;
        }

        .quick-questions button {
            background: white;
            border: 1px solid #667eea;
            color: #667eea;
            padding: 12px;
            border-radius: 20px;
            cursor: pointer;
        }

        .message-item {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .message-item.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .message-item.user .message-avatar {
            background: #07c160;
        }

        .message-content {
            max-width: 70%;
        }

        .message-bubble {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .message-item.user .message-bubble {
            background: #667eea;
            color: white;
        }

        .input-bar {
            display: flex;
            gap: 8px;
            padding: 12px;
            background: white;
            border-top: 1px solid #eee;
        }

        .input-bar input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 16px;
            outline: none;
        }

        .input-bar button {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 24px;
            cursor: pointer;
        }

        /* æ–‡æ¡£é¡µé¢æ ·å¼ */
        .document-item {
            background: white;
            margin: 12px 16px;
            padding: 16px;
            border-radius: 12px;
            display: flex;
            gap: 12px;
            cursor: pointer;
        }

        .doc-icon {
            width: 48px;
            height: 48px;
            background: #f7f8fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #667eea;
        }

        /* è´¦å•é¡µé¢æ ·å¼ */
        .payment-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 24px;
            color: white;
        }

        .bill-item {
            background: white;
            margin: 12px 16px;
            padding: 16px;
            border-radius: 12px;
        }

        .bill-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .bill-amount {
            font-size: 24px;
            font-weight: bold;
            color: #ee0a24;
        }

        /* ä¸ªäººä¸­å¿ƒæ ·å¼ */
        .user-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 32px 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            color: white;
        }

        .avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: white;
            color: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        /* é€šç”¨æ ·å¼ */
        .page {
            min-height: 100vh;
            padding-bottom: 60px;
        }

        .hidden {
            display: none !important;
        }

        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: #07c160;
            color: white;
            margin-right: 8px;
        }

        .tag.danger {
            background: #ee0a24;
        }

        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff976a;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            z-index: 9999;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Demoæ ‡è¯† -->
        <div class="demo-badge">MVPæ¼”ç¤ºç‰ˆ</div>

        <!-- ç™»å½•é¡µ -->
        <div v-if="currentPage === 'login'" class="login-page">
            <div class="login-header">
                <h1>ğŸ¢ ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹</h1>
                <p>æ™ºèƒ½æœåŠ¡ Â· è´´å¿ƒç®¡å®¶</p>
            </div>
            <van-form style="max-width: 400px; margin: 0 auto;">
                <van-cell-group inset>
                    <van-field v-model="loginForm.username" label="ç”¨æˆ·å" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" />
                    <van-field v-model="loginForm.password" type="password" label="å¯†ç " placeholder="è¯·è¾“å…¥å¯†ç " />
                </van-cell-group>
                <div style="padding: 24px 16px;">
                    <van-button round block type="primary" @click="handleLogin">ç™»å½•</van-button>
                    <van-button round block plain type="primary" style="margin-top: 12px;" @click="showToast('æ¼”ç¤ºç‰ˆæ— éœ€æ³¨å†Œï¼Œç›´æ¥ç™»å½•å³å¯')">
                        æ³¨å†Œè´¦å·
                    </van-button>
                </div>
            </van-form>
        </div>

        <!-- é¦–é¡µ -->
        <div v-if="currentPage === 'home'" class="page">
            <div class="header-info">
                <div>
                    <h2>é˜³å…‰èŠ±å›­å°åŒº</h2>
                    <p>æ¼”ç¤ºç”¨æˆ·</p>
                </div>
                <span style="font-size: 24px; cursor: pointer;" @click="currentPage = 'profile'">âš™ï¸</span>
            </div>

            <div class="ai-assistant" @click="currentPage = 'chat'">
                <div class="ai-avatar">ğŸ¤–</div>
                <div style="flex: 1;">
                    <h3>å°ç®¡å®¶AIåŠ©æ‰‹</h3>
                    <p style="color: #666; font-size: 13px;">æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ</p>
                </div>
                <van-button type="primary" round size="small">å¼€å§‹å¯¹è¯</van-button>
            </div>

            <div class="function-grid">
                <div class="function-item" @click="currentPage = 'chat'">
                    <div class="icon">ğŸ’¬</div>
                    <div>æ™ºèƒ½å’¨è¯¢</div>
                </div>
                <div class="function-item" @click="currentPage = 'bills'">
                    <div class="icon">ğŸ’°</div>
                    <div>ç¼´è´¹ä¸­å¿ƒ</div>
                </div>
                <div class="function-item" @click="currentPage = 'documents'">
                    <div class="icon">ğŸ“„</div>
                    <div>æ–‡æ¡£æŸ¥è¯¢</div>
                </div>
                <div class="function-item" @click="showToast('æŠ¥ä¿®åŠŸèƒ½å¼€å‘ä¸­')">
                    <div class="icon">ğŸ”§</div>
                    <div>æŠ¥ä¿®æœåŠ¡</div>
                </div>
                <div class="function-item" @click="showToast('æŠ•è¯‰å»ºè®®åŠŸèƒ½å¼€å‘ä¸­')">
                    <div class="icon">âš ï¸</div>
                    <div>æŠ•è¯‰å»ºè®®</div>
                </div>
                <div class="function-item" @click="showToast('å…¬å‘Šé€šçŸ¥åŠŸèƒ½å¼€å‘ä¸­')">
                    <div class="icon">ğŸ“¢</div>
                    <div>å…¬å‘Šé€šçŸ¥</div>
                </div>
            </div>

            <div style="margin: 16px; background: white; padding: 16px; border-radius: 12px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3>æœ€æ–°é€šçŸ¥</h3>
                </div>
                <div style="padding: 12px; background: #fff7e6; border-left: 3px solid #ff976a; border-radius: 4px;">
                    ğŸ“¢ æ¬¢è¿ä½¿ç”¨ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹MVPåŸå‹ï¼æœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥å’¨è¯¢å°ç®¡å®¶ã€‚
                </div>
            </div>
        </div>

        <!-- AIèŠå¤©é¡µ -->
        <div v-if="currentPage === 'chat'" class="chat-page">
            <van-nav-bar title="å°ç®¡å®¶AIåŠ©æ‰‹" left-arrow @click-left="currentPage = 'home'" />
            
            <div class="message-list">
                <div v-if="messages.length === 0" class="welcome">
                    <div class="icon">ğŸ¤–</div>
                    <h3>æ‚¨å¥½ï¼æˆ‘æ˜¯å°ç®¡å®¶</h3>
                    <p style="color: #666;">æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ</p>
                    
                    <div class="quick-questions">
                        <button @click="sendQuickQuestion('ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ')">ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ</button>
                        <button @click="sendQuickQuestion('å¦‚ä½•æŠ¥ä¿®ï¼Ÿ')">å¦‚ä½•æŠ¥ä¿®ï¼Ÿ</button>
                        <button @click="sendQuickQuestion('åœè½¦åœºæœ‰ä»€ä¹ˆè§„å®šï¼Ÿ')">åœè½¦åœºæœ‰ä»€ä¹ˆè§„å®šï¼Ÿ</button>
                        <button @click="sendQuickQuestion('è£…ä¿®éœ€è¦ä»€ä¹ˆæ‰‹ç»­ï¼Ÿ')">è£…ä¿®éœ€è¦ä»€ä¹ˆæ‰‹ç»­ï¼Ÿ</button>
                    </div>
                </div>

                <div v-for="(msg, index) in messages" :key="index" :class="['message-item', msg.role]">
                    <div class="message-avatar">{{ msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–' }}</div>
                    <div class="message-content">
                        <div class="message-bubble">{{ msg.content }}</div>
                        <div v-if="msg.sources" style="margin-top: 8px;">
                            <span v-for="(source, idx) in msg.sources" :key="idx" class="tag">
                                ğŸ“„ {{ source }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-bar">
                <input v-model="inputMessage" placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..." @keyup.enter="sendMessage" />
                <button @click="sendMessage">å‘é€</button>
            </div>
        </div>

        <!-- æ–‡æ¡£æŸ¥è¯¢é¡µ -->
        <div v-if="currentPage === 'documents'" class="page">
            <van-nav-bar title="æ–‡æ¡£æŸ¥è¯¢" left-arrow @click-left="currentPage = 'home'" />
            
            <van-search v-model="searchText" placeholder="æœç´¢æ–‡æ¡£" />

            <div style="display: flex; gap: 8px; padding: 12px 16px; overflow-x: auto;">
                <van-tag v-for="cat in categories" :key="cat" :type="selectedCategory === cat ? 'primary' : 'default'" size="large" round @click="selectedCategory = cat">
                    {{ cat }}
                </van-tag>
            </div>

            <div v-for="doc in filteredDocuments" :key="doc.id" class="document-item" @click="showDocDetail(doc)">
                <div class="doc-icon">ğŸ“„</div>
                <div style="flex: 1;">
                    <h4>{{ doc.title }}</h4>
                    <div style="margin: 8px 0;">
                        <span class="tag">{{ doc.category }}</span>
                        <span style="font-size: 12px; color: #999;">{{ doc.date }}</span>
                    </div>
                    <p style="font-size: 13px; color: #666;">{{ doc.summary }}</p>
                </div>
            </div>
        </div>

        <!-- ç¼´è´¹ä¸­å¿ƒé¡µ -->
        <div v-if="currentPage === 'bills'" class="page">
            <van-nav-bar title="ç¼´è´¹ä¸­å¿ƒ" left-arrow @click-left="currentPage = 'home'" />

            <div class="payment-summary">
                <div style="font-size: 32px; font-weight: bold;">Â¥{{ unpaidTotal }}</div>
                <div style="opacity: 0.9; margin-top: 4px;">å¾…ç¼´è´¹ç”¨</div>
                <van-button type="primary" round style="margin-top: 16px;" @click="showToast('æ”¯ä»˜åŠŸèƒ½æ¼”ç¤ºä¸­')">
                    ä¸€é”®ç¼´è´¹
                </van-button>
            </div>

            <div v-for="bill in bills" :key="bill.id" class="bill-item">
                <div class="bill-header">
                    <div>
                        <span style="font-size: 16px; font-weight: 500;">{{ bill.type }}</span>
                    </div>
                    <span :class="['tag', bill.status === 'å¾…æ”¯ä»˜' ? 'danger' : '']">{{ bill.status }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-size: 13px; color: #666;">è´¦æœŸ: {{ bill.period }}</div>
                        <div style="font-size: 13px; color: #666; margin-top: 4px;">åˆ°æœŸ: {{ bill.dueDate }}</div>
                    </div>
                    <div class="bill-amount">Â¥{{ bill.amount }}</div>
                </div>
                <div v-if="bill.status === 'å¾…æ”¯ä»˜'" style="margin-top: 12px; text-align: right;">
                    <van-button type="primary" size="small" round @click="handlePay(bill)">ç«‹å³ç¼´è´¹</van-button>
                </div>
            </div>
        </div>

        <!-- ä¸ªäººä¸­å¿ƒé¡µ -->
        <div v-if="currentPage === 'profile'" class="page">
            <div class="user-card">
                <div class="avatar">ğŸ‘¤</div>
                <div>
                    <h3>æ¼”ç¤ºç”¨æˆ·</h3>
                    <p style="opacity: 0.9;">13800138000</p>
                </div>
            </div>

            <van-cell-group style="margin-top: 12px;">
                <van-cell title="ä¸ªäººä¿¡æ¯" is-link @click="showToast('ä¸ªäººä¿¡æ¯åŠŸèƒ½æ¼”ç¤ºä¸­')" />
                <van-cell title="æˆ‘çš„æˆ¿äº§" is-link @click="showToast('æˆ¿äº§ä¿¡æ¯ï¼š1å·æ¥¼ 2å•å…ƒ 301å®¤')" />
                <van-cell title="ç¼´è´¹è®°å½•" is-link @click="showToast('ç¼´è´¹è®°å½•åŠŸèƒ½æ¼”ç¤ºä¸­')" />
                <van-cell title="æˆ‘çš„æŠ•è¯‰" is-link @click="showToast('æŠ•è¯‰è®°å½•åŠŸèƒ½æ¼”ç¤ºä¸­')" />
            </van-cell-group>

            <van-cell-group style="margin-top: 12px;">
                <van-cell title="æ¶ˆæ¯é€šçŸ¥" is-link @click="showToast('æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½æ¼”ç¤ºä¸­')" />
                <van-cell title="å¸¸è§é—®é¢˜" is-link @click="showToast('å¸¸è§é—®é¢˜åŠŸèƒ½æ¼”ç¤ºä¸­')" />
                <van-cell title="å…³äºæˆ‘ä»¬" is-link @click="showAbout" />
                <van-cell title="è®¾ç½®" is-link @click="showToast('è®¾ç½®åŠŸèƒ½æ¼”ç¤ºä¸­')" />
            </van-cell-group>

            <div style="padding: 20px 16px; margin-top: 32px;">
                <van-button block round @click="handleLogout">é€€å‡ºç™»å½•</van-button>
            </div>

            <div style="text-align: center; padding: 20px; color: #999; font-size: 12px;">
                <p>ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹ MVP v1.0.0</p>
                <p style="margin-top: 8px;">æ¼”ç¤ºåŸå‹ - ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</p>
            </div>
        </div>

        <!-- åº•éƒ¨å¯¼èˆªæ  -->
        <van-tabbar v-if="currentPage !== 'login'" v-model="activeTab" @change="onTabChange">
            <van-tabbar-item icon="home-o">é¦–é¡µ</van-tabbar-item>
            <van-tabbar-item icon="chat-o">æ™ºèƒ½å’¨è¯¢</van-tabbar-item>
            <van-tabbar-item icon="bill-o">ç¼´è´¹</van-tabbar-item>
            <van-tabbar-item icon="user-o">æˆ‘çš„</van-tabbar-item>
        </van-tabbar>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentPage: 'login',
                    activeTab: 0,
                    loginForm: {
                        username: '',
                        password: ''
                    },
                    // èŠå¤©ç›¸å…³
                    messages: [],
                    inputMessage: '',
                    // æ–‡æ¡£ç›¸å…³
                    searchText: '',
                    selectedCategory: 'å…¨éƒ¨',
                    categories: ['å…¨éƒ¨', 'è§„ç« åˆ¶åº¦', 'é€šçŸ¥å…¬å‘Š', 'ç»´ä¿®è®°å½•', 'ä¼šè®®è®°å½•', 'å…¶ä»–'],
                    documents: [
                        {
                            id: 1,
                            title: 'ç‰©ä¸šç®¡ç†è§„ç« åˆ¶åº¦',
                            category: 'è§„ç« åˆ¶åº¦',
                            date: '2024-01-15',
                            summary: 'æœ¬æ–‡æ¡£åŒ…å«å°åŒºç‰©ä¸šç®¡ç†çš„å„é¡¹è§„ç« åˆ¶åº¦ï¼ŒåŒ…æ‹¬åœè½¦ç®¡ç†ã€è£…ä¿®è§„å®šã€å…¬å…±è®¾æ–½ä½¿ç”¨ç­‰å†…å®¹ã€‚'
                        },
                        {
                            id: 2,
                            title: 'åœè½¦ç®¡ç†åŠæ³•',
                            category: 'è§„ç« åˆ¶åº¦',
                            date: '2024-01-10',
                            summary: 'å°åŒºåœè½¦åœºä½¿ç”¨å’Œç®¡ç†ç›¸å…³è§„å®šï¼ŒåŒ…æ‹¬è½¦ä½åˆ†é…ã€æ”¶è´¹æ ‡å‡†ã€åœè½¦è§„èŒƒç­‰ã€‚'
                        },
                        {
                            id: 3,
                            title: 'è£…ä¿®ç”³è¯·æµç¨‹',
                            category: 'é€šçŸ¥å…¬å‘Š',
                            date: '2024-01-05',
                            summary: 'ä¸šä¸»è£…ä¿®æˆ¿å±‹çš„ç”³è¯·æµç¨‹å’Œæ³¨æ„äº‹é¡¹ï¼ŒåŒ…æ‹¬è£…ä¿®æ—¶é—´ã€ææ–™è¦æ±‚ã€éªŒæ”¶æ ‡å‡†ç­‰ã€‚'
                        },
                        {
                            id: 4,
                            title: 'ç”µæ¢¯ç»´æŠ¤è®°å½•',
                            category: 'ç»´ä¿®è®°å½•',
                            date: '2024-01-20',
                            summary: '2024å¹´1æœˆç”µæ¢¯ä¾‹è¡Œç»´æŠ¤ä¿å…»è®°å½•ï¼Œæ‰€æœ‰ç”µæ¢¯è¿è¡Œæ­£å¸¸ã€‚'
                        }
                    ],
                    // è´¦å•ç›¸å…³
                    bills: [
                        {
                            id: 1,
                            type: 'ç‰©ä¸šè´¹',
                            amount: 1500,
                            period: '2024-01',
                            dueDate: '2024-01-31',
                            status: 'å¾…æ”¯ä»˜'
                        },
                        {
                            id: 2,
                            type: 'åœè½¦è´¹',
                            amount: 500,
                            period: '2024-01',
                            dueDate: '2024-01-31',
                            status: 'å¾…æ”¯ä»˜'
                        },
                        {
                            id: 3,
                            type: 'ç‰©ä¸šè´¹',
                            amount: 1500,
                            period: '2023-12',
                            dueDate: '2023-12-31',
                            status: 'å·²æ”¯ä»˜'
                        }
                    ]
                };
            },
            computed: {
                filteredDocuments() {
                    let docs = this.documents;
                    
                    if (this.selectedCategory !== 'å…¨éƒ¨') {
                        docs = docs.filter(d => d.category === this.selectedCategory);
                    }
                    
                    if (this.searchText) {
                        docs = docs.filter(d => 
                            d.title.includes(this.searchText) || 
                            d.summary.includes(this.searchText)
                        );
                    }
                    
                    return docs;
                },
                unpaidTotal() {
                    return this.bills
                        .filter(b => b.status === 'å¾…æ”¯ä»˜')
                        .reduce((sum, b) => sum + b.amount, 0);
                }
            },
            methods: {
                handleLogin() {
                    if (!this.loginForm.username) {
                        this.showToast('è¯·è¾“å…¥ç”¨æˆ·å');
                        return;
                    }
                    this.showToast('ç™»å½•æˆåŠŸ');
                    setTimeout(() => {
                        this.currentPage = 'home';
                        this.activeTab = 0;
                    }, 500);
                },
                handleLogout() {
                    vant.showConfirmDialog({
                        title: 'æç¤º',
                        message: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ',
                    }).then(() => {
                        this.currentPage = 'login';
                        this.messages = [];
                        this.loginForm = { username: '', password: '' };
                        this.showToast('å·²é€€å‡ºç™»å½•');
                    }).catch(() => {});
                },
                sendMessage() {
                    if (!this.inputMessage.trim()) return;
                    
                    const userMsg = {
                        role: 'user',
                        content: this.inputMessage
                    };
                    this.messages.push(userMsg);
                    
                    const question = this.inputMessage;
                    this.inputMessage = '';
                    
                    // æ¨¡æ‹ŸAIå›å¤
                    setTimeout(() => {
                        this.messages.push(this.getAIResponse(question));
                    }, 800);
                },
                sendQuickQuestion(question) {
                    this.inputMessage = question;
                    this.sendMessage();
                },
                getAIResponse(question) {
                    const responses = {
                        'ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ': {
                            content: 'æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¼´çº³ç‰©ä¸šè´¹ï¼š\n\n1. åœ¨çº¿ç¼´è´¹ï¼šç‚¹å‡»"ç¼´è´¹ä¸­å¿ƒ"é€‰æ‹©è´¦å•è¿›è¡Œæ”¯ä»˜\n2. å¾®ä¿¡æ”¯ä»˜ï¼šå…³æ³¨ç‰©ä¸šå…¬ä¼—å·è¿›è¡Œç¼´è´¹\n3. æ”¯ä»˜å®ï¼šæœç´¢"ç‰©ä¸šç¼´è´¹"å°ç¨‹åº\n4. ç°åœºç¼´è´¹ï¼šåˆ°ç‰©ä¸šæœåŠ¡ä¸­å¿ƒåŠç†\n\nç‰©ä¸šè´¹ç¼´è´¹æœŸé™ä¸ºæ¯æœˆæœˆåº•å‰ï¼Œé€¾æœŸå°†äº§ç”Ÿæ»çº³é‡‘ã€‚',
                            sources: ['ç‰©ä¸šç¼´è´¹æŒ‡å—']
                        },
                        'å¦‚ä½•æŠ¥ä¿®ï¼Ÿ': {
                            content: 'æŠ¥ä¿®æœåŠ¡æµç¨‹ï¼š\n\n1. åœ¨çº¿æŠ¥ä¿®ï¼šç‚¹å‡»é¦–é¡µ"æŠ¥ä¿®æœåŠ¡"å¡«å†™æŠ¥ä¿®ä¿¡æ¯\n2. ç”µè¯æŠ¥ä¿®ï¼šæ‹¨æ‰“ç‰©ä¸šæœåŠ¡çƒ­çº¿ 400-123-4567\n3. ç°åœºæŠ¥ä¿®ï¼šåˆ°ç‰©ä¸šæœåŠ¡ä¸­å¿ƒå‰å°ç™»è®°\n\næˆ‘ä»¬æ‰¿è¯ºï¼š\n- ç´§æ€¥ç»´ä¿®30åˆ†é’Ÿå†…å“åº”\n- ä¸€èˆ¬ç»´ä¿®24å°æ—¶å†…å¤„ç†\n- é‡å¤§ç»´ä¿®3ä¸ªå·¥ä½œæ—¥å†…å®Œæˆ',
                            sources: ['æŠ¥ä¿®æœåŠ¡æŒ‡å—']
                        },
                        'åœè½¦åœºæœ‰ä»€ä¹ˆè§„å®šï¼Ÿ': {
                            content: 'å°åŒºåœè½¦ç®¡ç†è§„å®šï¼š\n\n1. è½¦ä½åˆ†é…ï¼šä¸šä¸»ä¼˜å…ˆï¼Œå…ˆåˆ°å…ˆå¾—\n2. æ”¶è´¹æ ‡å‡†ï¼šä¸šä¸»500å…ƒ/æœˆï¼Œä¸´æ—¶åœè½¦5å…ƒ/å°æ—¶\n3. åœè½¦æ—¶é—´ï¼š24å°æ—¶å¼€æ”¾\n4. æ³¨æ„äº‹é¡¹ï¼š\n   - æŒ‰æŒ‡å®šä½ç½®åœæ”¾\n   - ç¦æ­¢å ç”¨æ¶ˆé˜²é€šé“\n   - ä¿æŒè½¦ä½æ¸…æ´\n   - éµå®ˆé™é€Ÿ(5km/h)',
                            sources: ['åœè½¦ç®¡ç†åŠæ³•']
                        },
                        'è£…ä¿®éœ€è¦ä»€ä¹ˆæ‰‹ç»­ï¼Ÿ': {
                            content: 'è£…ä¿®ç”³è¯·æµç¨‹ï¼š\n\n1. æäº¤èµ„æ–™ï¼š\n   - è£…ä¿®ç”³è¯·è¡¨\n   - è£…ä¿®æ–¹æ¡ˆå›¾çº¸\n   - æ–½å·¥å•ä½èµ„è´¨\n   - ä¸šä¸»èº«ä»½è¯æ˜\n\n2. ç¼´çº³æŠ¼é‡‘ï¼šè£…ä¿®ä¿è¯é‡‘3000å…ƒ\n\n3. è£…ä¿®æ—¶é—´ï¼š\n   - å·¥ä½œæ—¥: 8:00-12:00, 14:00-18:00\n   - å‘¨æœ«åŠèŠ‚å‡æ—¥ç¦æ­¢æ–½å·¥\n\n4. éªŒæ”¶é€šè¿‡åé€€è¿˜æŠ¼é‡‘',
                            sources: ['è£…ä¿®ç”³è¯·æµç¨‹', 'è£…ä¿®ç®¡ç†è§„å®š']
                        }
                    };
                    
                    return responses[question] || {
                        content: 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼æˆ‘æ˜¯ç‰©ä¸šAIåŠ©æ‰‹å°ç®¡å®¶ã€‚\n\næ‚¨çš„é—®é¢˜å·²è®°å½•ï¼Œæˆ‘ä¼šä¸ºæ‚¨æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ã€‚å¦‚éœ€ç´§æ€¥å¸®åŠ©ï¼Œè¯·æ‹¨æ‰“ç‰©ä¸šæœåŠ¡çƒ­çº¿ï¼š400-123-4567\n\nå¸¸è§é—®é¢˜ï¼š\n- ç‰©ä¸šè´¹ç¼´çº³\n- æŠ¥ä¿®æœåŠ¡\n- åœè½¦ç®¡ç†\n- è£…ä¿®ç”³è¯·',
                        sources: ['ç‰©ä¸šæœåŠ¡æ‰‹å†Œ']
                    };
                },
                showDocDetail(doc) {
                    vant.showDialog({
                        title: doc.title,
                        message: `åˆ†ç±»ï¼š${doc.category}\næ—¥æœŸï¼š${doc.date}\n\næ‘˜è¦ï¼š\n${doc.summary}\n\n(å®Œæ•´æ–‡æ¡£å†…å®¹å°†åœ¨æ­£å¼ç‰ˆæœ¬ä¸­æ˜¾ç¤º)`,
                        confirmButtonText: 'çŸ¥é“äº†'
                    });
                },
                handlePay(bill) {
                    vant.showDialog({
                        title: 'é€‰æ‹©æ”¯ä»˜æ–¹å¼',
                        message: 'è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼å®Œæˆç¼´è´¹ï¼š\n\nå¾®ä¿¡æ”¯ä»˜ / æ”¯ä»˜å®',
                        showCancelButton: true,
                        confirmButtonText: 'å¾®ä¿¡æ”¯ä»˜',
                        cancelButtonText: 'æ”¯ä»˜å®'
                    }).then(() => {
                        this.showToast('æ­£åœ¨è·³è½¬å¾®ä¿¡æ”¯ä»˜...');
                        setTimeout(() => {
                            bill.status = 'å·²æ”¯ä»˜';
                            this.showToast('æ”¯ä»˜æˆåŠŸï¼');
                        }, 1500);
                    }).catch(() => {
                        this.showToast('æ­£åœ¨è·³è½¬æ”¯ä»˜å®...');
                        setTimeout(() => {
                            bill.status = 'å·²æ”¯ä»˜';
                            this.showToast('æ”¯ä»˜æˆåŠŸï¼');
                        }, 1500);
                    });
                },
                showAbout() {
                    vant.showDialog({
                        title: 'å…³äºæˆ‘ä»¬',
                        message: 'ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹ MVPåŸå‹\n\nç‰ˆæœ¬ï¼šv1.0.0\n\nè¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºåŸå‹ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®å±•ç¤ºæ ¸å¿ƒåŠŸèƒ½ã€‚\n\næ ¸å¿ƒåŠŸèƒ½ï¼š\nâœ… AIæ™ºèƒ½å¯¹è¯\nâœ… æ–‡æ¡£æ™ºèƒ½ç®¡ç†\nâœ… åœ¨çº¿æ”¯ä»˜\nâœ… ç§»åŠ¨ç«¯H5ç•Œé¢\n\næŠ€æœ¯æ ˆï¼š\nVue3 + Vant UI',
                        confirmButtonText: 'çŸ¥é“äº†'
                    });
                },
                showToast(message) {
                    vant.showToast(message);
                },
                onTabChange(index) {
                    const pages = ['home', 'chat', 'bills', 'profile'];
                    this.currentPage = pages[index];
                }
            },
            watch: {
                currentPage(newPage) {
                    const pageMap = {
                        'home': 0,
                        'chat': 1,
                        'bills': 2,
                        'profile': 3
                    };
                    if (pageMap[newPage] !== undefined) {
                        this.activeTab = pageMap[newPage];
                    }
                }
            }
        }).use(vant).mount('#app');
    </script>
</body>
</html>
