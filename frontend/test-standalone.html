<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹ - æµ‹è¯•ç‰ˆ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@4/lib/index.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            background-color: #f7f8fa;
        }
        #app { min-height: 100vh; padding-bottom: 50px; }
        .login-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 60px 20px;
        }
        .login-header { text-align: center; color: white; margin-bottom: 60px; }
        .login-header h1 { font-size: 32px; margin-bottom: 10px; }
        .header-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .ai-assistant {
            background: white;
            margin: 16px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 16px;
            cursor: pointer;
        }
        .ai-avatar {
            width: 60px;
            height: 60px;
            border-radius: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }
        .function-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 16px;
        }
        .function-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .function-item:active { transform: scale(0.95); }
        .function-item .icon { font-size: 32px; margin-bottom: 8px; }
        .chat-page {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f0f2f5;
        }
        .message-list { flex: 1; overflow-y: auto; padding: 16px; }
        .welcome { text-align: center; padding: 40px 20px; }
        .welcome .icon { font-size: 60px; color: #667eea; margin-bottom: 16px; }
        .quick-questions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 300px;
            margin: 20px auto;
        }
        .quick-questions button {
            background: white;
            border: 1px solid #667eea;
            color: #667eea;
            padding: 12px;
            border-radius: 20px;
            cursor: pointer;
        }
        .message-item { display: flex; gap: 12px; margin-bottom: 16px; }
        .message-item.user { flex-direction: row-reverse; }
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .message-item.user .message-avatar { background: #07c160; }
        .message-content { max-width: 70%; }
        .message-bubble {
            background: white;
            padding: 12px 16px;
            border-radius: 12px;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        .message-item.user .message-bubble { background: #667eea; color: white; }
        .input-bar {
            display: flex;
            gap: 8px;
            padding: 12px;
            background: white;
            border-top: 1px solid #eee;
        }
        .input-bar input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 8px 16px;
            outline: none;
        }
        .input-bar button {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 8px 24px;
            cursor: pointer;
        }
        .page { min-height: 100vh; padding-bottom: 60px; }
        .hidden { display: none !important; }
        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: #07c160;
            color: white;
            margin-right: 8px;
        }
        .demo-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #07c160;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            z-index: 9999;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="demo-badge">âœ… æµ‹è¯•ç‰ˆè¿è¡Œä¸­</div>

        <!-- ç™»å½•é¡µ -->
        <div v-if="currentPage === 'login'" class="login-page">
            <div class="login-header">
                <h1>ğŸ¢ ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹</h1>
                <p>æ™ºèƒ½æœåŠ¡ Â· è´´å¿ƒç®¡å®¶</p>
            </div>
            <van-form style="max-width: 400px; margin: 0 auto;">
                <van-cell-group inset>
                    <van-field v-model="loginForm.username" label="ç”¨æˆ·å" placeholder="è¾“å…¥ä»»æ„ç”¨æˆ·åå³å¯" />
                    <van-field v-model="loginForm.password" type="password" label="å¯†ç " placeholder="è¾“å…¥ä»»æ„å¯†ç å³å¯" />
                </van-cell-group>
                <div style="padding: 24px 16px;">
                    <van-button round block type="primary" @click="handleLogin">ç™»å½•</van-button>
                    <p style="text-align: center; margin-top: 12px; color: white; font-size: 13px;">
                        æµ‹è¯•ç‰ˆï¼šè¾“å…¥ä»»æ„ç”¨æˆ·åå¯†ç å³å¯ç™»å½•
                    </p>
                </div>
            </van-form>
        </div>

        <!-- é¦–é¡µ -->
        <div v-if="currentPage === 'home'" class="page">
            <div class="header-info">
                <div>
                    <h2>é˜³å…‰èŠ±å›­å°åŒº</h2>
                    <p>{{ loginForm.username || 'æµ‹è¯•ç”¨æˆ·' }}</p>
                </div>
                <span style="font-size: 24px; cursor: pointer;" @click="currentPage = 'profile'">âš™ï¸</span>
            </div>

            <div class="ai-assistant" @click="currentPage = 'chat'">
                <div class="ai-avatar">ğŸ¤–</div>
                <div style="flex: 1;">
                    <h3>å°ç®¡å®¶AIåŠ©æ‰‹</h3>
                    <p style="color: #666; font-size: 13px;">æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ</p>
                </div>
                <van-button type="primary" round size="small">å¼€å§‹å¯¹è¯</van-button>
            </div>

            <div class="function-grid">
                <div class="function-item" @click="currentPage = 'chat'">
                    <div class="icon">ğŸ’¬</div>
                    <div>æ™ºèƒ½å’¨è¯¢</div>
                </div>
                <div class="function-item" @click="showToast('ç¼´è´¹åŠŸèƒ½æ¼”ç¤º')">
                    <div class="icon">ğŸ’°</div>
                    <div>ç¼´è´¹ä¸­å¿ƒ</div>
                </div>
                <div class="function-item" @click="showToast('æ–‡æ¡£åŠŸèƒ½æ¼”ç¤º')">
                    <div class="icon">ğŸ“„</div>
                    <div>æ–‡æ¡£æŸ¥è¯¢</div>
                </div>
                <div class="function-item" @click="showToast('æŠ¥ä¿®åŠŸèƒ½æ¼”ç¤º')">
                    <div class="icon">ğŸ”§</div>
                    <div>æŠ¥ä¿®æœåŠ¡</div>
                </div>
                <div class="function-item" @click="showToast('æŠ•è¯‰åŠŸèƒ½æ¼”ç¤º')">
                    <div class="icon">âš ï¸</div>
                    <div>æŠ•è¯‰å»ºè®®</div>
                </div>
                <div class="function-item" @click="showToast('å…¬å‘ŠåŠŸèƒ½æ¼”ç¤º')">
                    <div class="icon">ğŸ“¢</div>
                    <div>å…¬å‘Šé€šçŸ¥</div>
                </div>
            </div>
        </div>

        <!-- AIèŠå¤©é¡µ -->
        <div v-if="currentPage === 'chat'" class="chat-page">
            <van-nav-bar title="å°ç®¡å®¶AIåŠ©æ‰‹" left-arrow @click-left="currentPage = 'home'" />
            
            <div class="message-list">
                <div v-if="messages.length === 0" class="welcome">
                    <div class="icon">ğŸ¤–</div>
                    <h3>æ‚¨å¥½ï¼æˆ‘æ˜¯å°ç®¡å®¶</h3>
                    <p style="color: #666;">æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ</p>
                    
                    <div class="quick-questions">
                        <button @click="sendQuickQuestion('ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ')">ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ</button>
                        <button @click="sendQuickQuestion('å¦‚ä½•æŠ¥ä¿®ï¼Ÿ')">å¦‚ä½•æŠ¥ä¿®ï¼Ÿ</button>
                        <button @click="sendQuickQuestion('åœè½¦åœºè§„å®š')">åœè½¦åœºè§„å®š</button>
                        <button @click="sendQuickQuestion('è£…ä¿®æ‰‹ç»­')">è£…ä¿®æ‰‹ç»­</button>
                    </div>
                </div>

                <div v-for="(msg, index) in messages" :key="index" :class="['message-item', msg.role]">
                    <div class="message-avatar">{{ msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–' }}</div>
                    <div class="message-content">
                        <div class="message-bubble">{{ msg.content }}</div>
                        <div v-if="msg.sources" style="margin-top: 8px;">
                            <span v-for="(source, idx) in msg.sources" :key="idx" class="tag">
                                ğŸ“„ {{ source }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-bar">
                <input v-model="inputMessage" placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..." @keyup.enter="sendMessage" />
                <button @click="sendMessage">å‘é€</button>
            </div>
        </div>

        <!-- ä¸ªäººä¸­å¿ƒ -->
        <div v-if="currentPage === 'profile'" class="page">
            <div class="header-info">
                <div>
                    <h2>{{ loginForm.username || 'æµ‹è¯•ç”¨æˆ·' }}</h2>
                    <p>13800138000</p>
                </div>
            </div>
            <van-cell-group style="margin-top: 12px;">
                <van-cell title="ä¸ªäººä¿¡æ¯" is-link @click="showToast('ä¸ªäººä¿¡æ¯')" />
                <van-cell title="æˆ‘çš„æˆ¿äº§" is-link @click="showToast('1å·æ¥¼ 2å•å…ƒ 301å®¤')" />
                <van-cell title="ç¼´è´¹è®°å½•" is-link @click="showToast('ç¼´è´¹è®°å½•')" />
                <van-cell title="é€€å‡ºç™»å½•" is-link @click="handleLogout" />
            </van-cell-group>
            <div style="text-align: center; padding: 20px; color: #999; font-size: 12px;">
                <p>ç‰©ä¸šç®¡ç†AIåŠ©æ‰‹ v1.0.0</p>
                <p style="margin-top: 8px;">æµ‹è¯•ç‰ˆ - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ</p>
            </div>
        </div>

        <!-- åº•éƒ¨å¯¼èˆª -->
        <van-tabbar v-if="currentPage !== 'login'" v-model="activeTab" @change="onTabChange">
            <van-tabbar-item icon="home-o">é¦–é¡µ</van-tabbar-item>
            <van-tabbar-item icon="chat-o">æ™ºèƒ½å’¨è¯¢</van-tabbar-item>
            <van-tabbar-item icon="bill-o">ç¼´è´¹</van-tabbar-item>
            <van-tabbar-item icon="user-o">æˆ‘çš„</van-tabbar-item>
        </van-tabbar>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vant@4/lib/vant.min.js"></script>
    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentPage: 'login',
                    activeTab: 0,
                    loginForm: { username: '', password: '' },
                    messages: [],
                    inputMessage: ''
                };
            },
            methods: {
                handleLogin() {
                    if (!this.loginForm.username) {
                        this.showToast('è¯·è¾“å…¥ç”¨æˆ·å');
                        return;
                    }
                    this.showToast('ç™»å½•æˆåŠŸï¼');
                    setTimeout(() => {
                        this.currentPage = 'home';
                        this.activeTab = 0;
                    }, 500);
                },
                handleLogout() {
                    vant.showConfirmDialog({
                        title: 'æç¤º',
                        message: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ',
                    }).then(() => {
                        this.currentPage = 'login';
                        this.messages = [];
                        this.showToast('å·²é€€å‡ºç™»å½•');
                    }).catch(() => {});
                },
                sendMessage() {
                    if (!this.inputMessage.trim()) return;
                    
                    this.messages.push({
                        role: 'user',
                        content: this.inputMessage
                    });
                    
                    const question = this.inputMessage;
                    this.inputMessage = '';
                    
                    setTimeout(() => {
                        this.messages.push(this.getAIResponse(question));
                        this.$nextTick(() => {
                            const list = document.querySelector('.message-list');
                            if (list) list.scrollTop = list.scrollHeight;
                        });
                    }, 800);
                },
                sendQuickQuestion(question) {
                    this.inputMessage = question;
                    this.sendMessage();
                },
                getAIResponse(question) {
                    const responses = {
                        'ç‰©ä¸šè´¹æ€ä¹ˆç¼´çº³ï¼Ÿ': {
                            content: 'æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¼´çº³ç‰©ä¸šè´¹ï¼š\n\n1. åœ¨çº¿ç¼´è´¹ï¼šç‚¹å‡»"ç¼´è´¹ä¸­å¿ƒ"é€‰æ‹©è´¦å•è¿›è¡Œæ”¯ä»˜\n2. å¾®ä¿¡æ”¯ä»˜ï¼šå…³æ³¨ç‰©ä¸šå…¬ä¼—å·è¿›è¡Œç¼´è´¹\n3. æ”¯ä»˜å®ï¼šæœç´¢"ç‰©ä¸šç¼´è´¹"å°ç¨‹åº\n4. ç°åœºç¼´è´¹ï¼šåˆ°ç‰©ä¸šæœåŠ¡ä¸­å¿ƒåŠç†\n\nç‰©ä¸šè´¹ç¼´è´¹æœŸé™ä¸ºæ¯æœˆæœˆåº•å‰ï¼Œé€¾æœŸå°†äº§ç”Ÿæ»çº³é‡‘ã€‚',
                            sources: ['ç‰©ä¸šç¼´è´¹æŒ‡å—']
                        },
                        'å¦‚ä½•æŠ¥ä¿®ï¼Ÿ': {
                            content: 'æŠ¥ä¿®æœåŠ¡æµç¨‹ï¼š\n\n1. åœ¨çº¿æŠ¥ä¿®ï¼šç‚¹å‡»é¦–é¡µ"æŠ¥ä¿®æœåŠ¡"å¡«å†™æŠ¥ä¿®ä¿¡æ¯\n2. ç”µè¯æŠ¥ä¿®ï¼šæ‹¨æ‰“ç‰©ä¸šæœåŠ¡çƒ­çº¿ 400-123-4567\n3. ç°åœºæŠ¥ä¿®ï¼šåˆ°ç‰©ä¸šæœåŠ¡ä¸­å¿ƒå‰å°ç™»è®°\n\næˆ‘ä»¬æ‰¿è¯ºï¼š\n- ç´§æ€¥ç»´ä¿®30åˆ†é’Ÿå†…å“åº”\n- ä¸€èˆ¬ç»´ä¿®24å°æ—¶å†…å¤„ç†',
                            sources: ['æŠ¥ä¿®æœåŠ¡æŒ‡å—']
                        },
                        'åœè½¦åœºè§„å®š': {
                            content: 'å°åŒºåœè½¦ç®¡ç†è§„å®šï¼š\n\n1. è½¦ä½åˆ†é…ï¼šä¸šä¸»ä¼˜å…ˆï¼Œå…ˆåˆ°å…ˆå¾—\n2. æ”¶è´¹æ ‡å‡†ï¼šä¸šä¸»500å…ƒ/æœˆï¼Œä¸´æ—¶åœè½¦5å…ƒ/å°æ—¶\n3. åœè½¦æ—¶é—´ï¼š24å°æ—¶å¼€æ”¾\n4. æ³¨æ„äº‹é¡¹ï¼šæŒ‰æŒ‡å®šä½ç½®åœæ”¾ï¼Œç¦æ­¢å ç”¨æ¶ˆé˜²é€šé“',
                            sources: ['åœè½¦ç®¡ç†åŠæ³•']
                        },
                        'è£…ä¿®æ‰‹ç»­': {
                            content: 'è£…ä¿®ç”³è¯·æµç¨‹ï¼š\n\n1. æäº¤èµ„æ–™ï¼šè£…ä¿®ç”³è¯·è¡¨ã€è£…ä¿®æ–¹æ¡ˆå›¾çº¸ã€æ–½å·¥å•ä½èµ„è´¨\n2. ç¼´çº³æŠ¼é‡‘ï¼šè£…ä¿®ä¿è¯é‡‘3000å…ƒ\n3. è£…ä¿®æ—¶é—´ï¼šå·¥ä½œæ—¥ 8:00-12:00, 14:00-18:00\n4. éªŒæ”¶é€šè¿‡åé€€è¿˜æŠ¼é‡‘',
                            sources: ['è£…ä¿®ç”³è¯·æµç¨‹']
                        }
                    };
                    
                    return responses[question] || {
                        content: 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼æˆ‘æ˜¯ç‰©ä¸šAIåŠ©æ‰‹å°ç®¡å®¶ã€‚\n\næ‚¨çš„é—®é¢˜å·²è®°å½•ï¼Œæˆ‘ä¼šä¸ºæ‚¨æŸ¥è¯¢ç›¸å…³ä¿¡æ¯ã€‚å¦‚éœ€ç´§æ€¥å¸®åŠ©ï¼Œè¯·æ‹¨æ‰“ç‰©ä¸šæœåŠ¡çƒ­çº¿ï¼š400-123-4567',
                        sources: ['ç‰©ä¸šæœåŠ¡æ‰‹å†Œ']
                    };
                },
                showToast(message) {
                    vant.showToast(message);
                },
                onTabChange(index) {
                    const pages = ['home', 'chat', 'bills', 'profile'];
                    this.currentPage = pages[index];
                }
            },
            watch: {
                currentPage(newPage) {
                    const pageMap = { 'home': 0, 'chat': 1, 'bills': 2, 'profile': 3 };
                    if (pageMap[newPage] !== undefined) {
                        this.activeTab = pageMap[newPage];
                    }
                }
            }
        }).use(vant).mount('#app');
    </script>
</body>
</html>
